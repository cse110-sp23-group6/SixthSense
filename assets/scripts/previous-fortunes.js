import{STAR_SIGNS as l}from"./constants.js";import{playButtonHoverSound as m}from"./VolumeControl.js";const u=window.localStorage.getItem("readings")?JSON.parse(window.localStorage.getItem("readings")):[];function g(e,t){var n=parseInt(e),o=parseInt(t);for(const d of l)if(n===d.start.month&&o>=d.start.day||n===d.end.month&&o<=d.end.day)return d.name;return null}function p(){var e,t=document.querySelector(".selected");t&&(console.log("Opening:",t.innerText),t=t.innerText,(e=document.getElementById("expanded-content")).innerHTML=t,(t=document.createElement("button")).className="close-button",t.innerText="Close",t.addEventListener("click",()=>{document.getElementById("expanded-content").classList.remove("expanded")}),t=t,e.appendChild(t),e.classList.add("expanded"))}document.addEventListener("DOMContentLoaded",function(){var e=JSON.parse(window.localStorage.getItem("overallEmotion")),t=document.getElementById("finalemotion");t.alt=e,t.src=""!==e?`assets/emotion_auras/${e}.gif`:"";let n=window.localStorage.getItem("formData");n=n&&JSON.parse(n),document.getElementById("name").textContent=n.name,document.getElementById("star-sign").textContent=g(n.month,n.date),document.getElementById("relationship").textContent=n.status;var o=document.getElementById("reading-list"),d=[];for(let e=u.length-1;0<=e;e--){var l=u[e],r=document.createElement("li");r.innerText=l.date+": "+l.reading,o.appendChild(r),d.push(r),console.log(l)}{var a=d;const c=document.getElementById("delete");for(let e=0;e<a.length;e++)a[e].addEventListener("click",function(){if(this.classList.contains("selected"))this.classList.remove("selected"),c.innerHTML="Delete All";else{for(let e=0;e<a.length;e++)a[e].classList.remove("selected");this.classList.add("selected"),console.log("selected:"+this.innerText),c.innerHTML="Delete Fortune"}})}(t=document.getElementById("open-button")).addEventListener("click",p);const s=document.getElementById("delete");s.addEventListener("click",function(){if("Delete Fortune"==s.innerHTML){if(e=document.querySelector(".selected")){e.remove();var e=e.innerText,t=e.split(": ")[0],n=e.split(": ")[1];for(let e=0;e<u.length;e++){var o=u[e];if(o.date===t&&o.reading===n){u.splice(e,1);break}}window.localStorage.setItem("readings",JSON.stringify(u))}}else 0!=u.length&&(document.getElementById("reading-list").innerHTML="",window.localStorage.removeItem("readings"))});(e=document.getElementById("home")).addEventListener("click",function(){location.href="index.html"});var i=document.createElement("volume-control");document.getElementById("sound-button-container").appendChild(i),t.addEventListener("mouseenter",m),e.addEventListener("mouseenter",m),s.addEventListener("mouseenter",m)});export{g as getStarSign};