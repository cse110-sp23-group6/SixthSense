<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>choose-your-fortune.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#allButtons:">allButtons:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#array:">array:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#back:">back:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#button:">button:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#buttonHoverSound:">buttonHoverSound:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#closeButton:">closeButton:</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createEntries">createEntries</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#currentUnixTimestamp:">currentUnixTimestamp:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#EMOTIONS_TABLE">EMOTIONS_TABLE</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#expandedContent:">expandedContent:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#formData:">formData:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#friendsAndFamilyDiv:">friendsAndFamilyDiv:</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getStarSign">getStarSign</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#handleBackButtonClick">handleBackButtonClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#handleNextButtonClick">handleNextButtonClick</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#homeButton:">homeButton:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#lastVolume:">lastVolume:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#liElement:">liElement:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#link:">link:</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#randomArrayItem">randomArrayItem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#randomInt">randomInt</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#reading:">reading:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#READINGS">READINGS</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#readings:">readings:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#screenshotBtn:">screenshotBtn:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#statusValue:">statusValue:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#UL:">UL:</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#volumelevel:">volumelevel:</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">choose-your-fortune.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * file name: choose-your-fortune
 * choose your fortunes javascript doc
 * purpose: for populating the page at start and multiple functions
 */
import { RE_ASK_INTERVAL_SECONDS } from "./constants.js";

/**
 * purpose: runs when page is loaded
 * mostly handles sounds and each button that is populated (each category)
 * 
 * @const headerText: header text
 * @const typingSound: typing-sound when you click something
 * @const backgroundsound: background Sound
 * @const text: textcontent of the header text
 * @type {String} html: html used for the categories
 * @type {number} delay: 100 milisecond delay to use for header animation
 * @const volumeSlider: volume slider
 * @const volumeIcon: icon for volume
 * @const lastVolume: for storing the volume in local storage for remembering
 */
document.addEventListener("DOMContentLoaded", function () {
  const headerText = document.getElementById('header-text');
  const typingSound = document.getElementById('typing-sound');
  const backgroundSound = new Audio('assets/sounds/background-music.mp3');
  const text = headerText.textContent;
  let html = '';

  for (let i = 0; i &lt; text.length; i++) {
    if (text[i] === ' ') {
      html += '&lt;span class="header-hidden">&amp;nbsp;&lt;/span>';
    } else {
      html += `&lt;span class="header-hidden">${text[i]}&lt;/span>`;
    }
  }

  headerText.innerHTML = html;

  typingSound.currentTime = 0; // Reset the sound to start
  typingSound.playbackRate = 1.5;
  typingSound.volume = 0.5; // Lower volume
  typingSound.play(); // Play the typing sound

  backgroundSound.currentTime = 0; // Reset the background sound to start
  backgroundSound.loop = true; // Enable looping
  backgroundSound.play(); // Play the background sound

  let delay = 100; // time in milliseconds between each character
  document.querySelectorAll('.header-hidden').forEach(function (elem) {
    setTimeout(function () {
      elem.style.opacity = 1;
    }, delay);
    delay += 70;
  });
  typingSound.currentTime = 0;

  /**
   * purpose: create the four buttons and add sound if hovered on
   * 
   * @const buttonHoverSound: sound that plays when you hover on a button
   * @const loveDiv: button for love category
   * @const careerDiv: button for career category
   * @const healthDiv: button for health category
   * @const friendsAndFamilyDiv: button for friends and family
   */
  setTimeout(function () {

    const buttonHoverSound = new Audio('assets/sounds/button-hover.mp3');
    buttonHoverSound.volume = 0.2; // Lower volume

    const loveDiv = document.getElementById('love-div');
    loveDiv.addEventListener('click', function () {
      handleNavigation('love');
    });
        // Add event listeners for hovering over fortune boxes
    loveDiv.addEventListener('mouseenter', function () {
      playButtonHoverSound('assets/sounds/button-hover.mp3');
    });

    //when the category is clicked, go to function handleNavigation with input: type
    const careerDiv = document.getElementById('career-div');
    careerDiv.addEventListener('click', function () {
      handleNavigation('career');
    });
    careerDiv.addEventListener('mouseenter', function () {
      playButtonHoverSound('assets/sounds/button-hover.mp3');
    });

    const healthDiv = document.getElementById('health-div');
    healthDiv.addEventListener('click', function () {
      handleNavigation('health');
    });
    healthDiv.addEventListener('mouseenter', function () {
      playButtonHoverSound('assets/sounds/button-hover.mp3');
    });

    const friendsAndFamilyDiv = document.getElementById('friends-and-family-div');
    friendsAndFamilyDiv.addEventListener('click', function () {
      handleNavigation('friends_and_family');
    });
    friendsAndFamilyDiv.addEventListener('mouseenter', function () {
      playButtonHoverSound('assets/sounds/button-hover.mp3');
    });

    const backButton = document.getElementById('back-button');
    backButton.addEventListener('click', function () {
      window.location.href = 'index.html';
    });
    backButton.addEventListener('mouseenter', function () {
      playButtonHoverSound('assets/sounds/button-hover.mp3');
    });

    /**
     * function name: playButtonHoverSound
     * purpose: Function to play the button hover sound
     * 
     * @const buttonHoverSound: new audio with soundSrc
     */
    function playButtonHoverSound(soundSrc) {
      const buttonHoverSound = new Audio(soundSrc);
      buttonHoverSound.volume = (volumeSlider.value) / 10; // change volume according sound bar
      buttonHoverSound.currentTime = 0; // Reset the sound to start
      buttonHoverSound.play();
    }

    // function for volume control
    const volumeSlider = document.getElementById('volume-slider');
    const volumeIcon = document.getElementById('volume-icon');

    // mute and unmute for clicking icon

    let lastVolume = 1;
    backgroundSound.volume = lastVolume;

    // store the last volumn in record 
    volumeSlider.addEventListener('input', function () {
      lastVolume = volumeSlider.value;
      backgroundSound.volume = lastVolume;
      updateVolume();
    });

    volumeIcon.addEventListener('click', function() {
      if (backgroundSound.volume == 0) {
        backgroundSound.volume = lastVolume;
        volumeSlider.value = lastVolume;
      } else {
        lastVolume = backgroundSound.volume;
        backgroundSound.volume = 0;
        volumeSlider.value = 0;
      }
      updateVolume();
    });

    volumeSlider.addEventListener('change', updateVolume);
    volumeSlider.addEventListener('mousemove', updateVolume);

    /**
     * function name: updateVolume
     * purpose: update the volume of sound effects
     * 
     * @const volumelevel: level of volume ranges from 0 to 3
     */
    function updateVolume() {
      console.log(volumeSlider.value); 
      backgroundSound.volume = volumeSlider.value;
      backgroundSound.volume = volumeSlider.value;
      let volumeLevel;

      if (backgroundSound.volume === 0) {
        volumeLevel = "0";
      } else if (backgroundSound.volume &lt; 0.33) {
        volumeLevel = "1";
      } else if (backgroundSound.volume &lt; 0.66) {
        volumeLevel = "2";
      } else {
        volumeLevel = "3";
      }
      volumeIcon.src = `assets/images/volume-level-${volumeLevel}.svg`;
    }
  }, 2000); // Delay in milliseconds matching the fade-in animation duration
});

/**
 * function name: handleNavigation
 * purpose: handle the navigation to each one of the categories when clicked
 * checks if emotion1 or 2 was set more than 12 hours ago, if not, redirect to emotions1
 * if so, redirect to general reading with the emotion and reading type already in hand
 * 
 * @const emotion10bj: emotion1
 * @const emotion20bj: emotion2
 * @const currentUnixTimestamp: current date
 * @param type = the category of reading that the user picked
 */

function handleNavigation (type) {
  const emotion1Obj = JSON.parse(window.localStorage.getItem('emotion1'));
  const emotion2Obj = JSON.parse(window.localStorage.getItem('emotion2'));
  const currentUnixTimestamp = Date.now() / 1000.0;

  // If no emotion1 is set or emotion1 was set > 12 hours ago, redirect to emotion1
  if (emotion1Obj == null ||
    emotion1Obj.emotion == null ||
    currentUnixTimestamp - emotion1Obj.timestamp > RE_ASK_INTERVAL_SECONDS) {
    window.location.assign('emotions1.html?reading=' + type);
    // If no emotion2 is set or emotion2 was set > 12 hours ago, redirect to emotion1
  } else if (emotion2Obj == null ||
    emotion2Obj.emotion == null ||
    currentUnixTimestamp - emotion1Obj.timestamp > RE_ASK_INTERVAL_SECONDS) {
    window.location.assign('emotions2.html?reading=' + type);
  } else {
    window.location.assign('reading.html?reading=' + type);
  }
}

</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Tue Jun 06 2023 18:46:18 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
